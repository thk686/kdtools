#!/bin/sh

# Borrowed from https://github.com/eddelbuettel/rcppsimdjson/blob/master/configure

: ${R_HOME=`R RHOME`}
if test -z "${R_HOME}"; then
    echo Could not determine R_HOME.
    exit 1
fi

CXX17=`${R_HOME}/bin/R CMD config --all | awk '{print $1}' | grep "^CXX17$"`

if test "x${CXX17}" = "x"; then
   sed -e 's/@CXXSTD@/CXX14/' -e 's/@HASCXX17@/-DNO_CXX17/' src/Makevars.in > src/Makevars
else
   sed -e 's/@CXXSTD@/CXX17/' -e 's/@HASCXX17@//' src/Makevars.in > src/Makevars
fi

exit 0
