<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting started with kdtools â€¢ kdtools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with kdtools">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">kdtools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/kdtools.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/methods.html">Compact multidimensional sorting and searching with kdtools</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/thk686/kdtools">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Getting started with kdtools</h1>
                        <h4 class="author">Timothy H. Keitt</h4>
            
            <h4 class="date">2019-04-22</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/thk686/kdtools/blob/master/vignettes/kdtools.Rmd"><code>vignettes/kdtools.Rmd</code></a></small>
      <div class="hidden name"><code>kdtools.Rmd</code></div>

    </div>

    
    
<p>The kdtools package can be used to search for multidimensional points in a boxed region and find nearest neighbors in 1 to 9 dimensions. The package uses binary search on a sorted sequence of values. The current package is limited to matrices of real values. If you are interested in using string or mixed types in different dimensions, see the methods vignette.</p>
<p>Using kdtools is straightforward. There are four steps:</p>
<div id="step-1--convert-your-matrix-of-values-into-a-arrayvec-object" class="section level5">
<h5 class="hasAnchor">
<a href="#step-1--convert-your-matrix-of-values-into-a-arrayvec-object" class="anchor"></a>Step 1. Convert your matrix of values into a arrayvec object</h5>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(kdtools)
x =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">runif</a></span>(<span class="fl">3e3</span>), <span class="dt">nc =</span> <span class="dv">3</span>)
y =<span class="st"> </span><span class="kw"><a href="../reference/convert.html">matrix_to_tuples</a></span>(x)
y[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="dv">3</span>)]
<span class="co">#&gt;            [,1]      [,2]</span>
<span class="co">#&gt; [1,] 0.25834951 0.4861129</span>
<span class="co">#&gt; [2,] 0.03034524 0.5649745</span>
<span class="co">#&gt; [3,] 0.42606723 0.1469675</span></code></pre></div>
<p>The arrayvec object can be manipulated as if it were a matrix.</p>
</div>
<div id="step-2--sort-the-data" class="section level5">
<h5 class="hasAnchor">
<a href="#step-2--sort-the-data" class="anchor"></a>Step 2. Sort the data</h5>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/kdsort.html">kd_sort</a></span>(y, <span class="dt">inplace =</span> <span class="ot">TRUE</span>, <span class="dt">parallel =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt;            [,1]       [,2]       [,3]</span>
<span class="co">#&gt; [1,] 0.07977239 0.11978295 0.10041752</span>
<span class="co">#&gt; [2,] 0.05642256 0.09828960 0.19815089</span>
<span class="co">#&gt; [3,] 0.09291032 0.07148259 0.20112564</span>
<span class="co">#&gt; [4,] 0.07616577 0.12835161 0.07973155</span>
<span class="co">#&gt; [5,] 0.10496537 0.16711053 0.07296113</span>
<span class="co">#&gt; (continues for 995 more rows)</span></code></pre></div>
</div>
<div id="step-3--search-the-data" class="section level5">
<h5 class="hasAnchor">
<a href="#step-3--search-the-data" class="anchor"></a>Step 3. Search the data</h5>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rq =<span class="st"> </span><span class="kw"><a href="../reference/search.html">kd_range_query</a></span>(y, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>), <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span><span class="op">/</span><span class="dv">4</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">4</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">4</span>)); rq
<span class="co">#&gt;            [,1]       [,2]       [,3]</span>
<span class="co">#&gt; [1,] 0.07977239 0.11978295 0.10041752</span>
<span class="co">#&gt; [2,] 0.05642256 0.09828960 0.19815089</span>
<span class="co">#&gt; [3,] 0.09291032 0.07148259 0.20112564</span>
<span class="co">#&gt; [4,] 0.07616577 0.12835161 0.07973155</span>
<span class="co">#&gt; [5,] 0.10496537 0.16711053 0.07296113</span>
<span class="co">#&gt; (continues for 15 more rows)</span>
i =<span class="st"> </span><span class="kw"><a href="../reference/nneighb.html">kd_nearest_neighbor</a></span>(y, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)); y[i, ]
<span class="co">#&gt; [1] 0.07616577 0.12835161 0.07973155</span>
nns =<span class="st"> </span><span class="kw"><a href="../reference/nneighb.html">kd_nearest_neighbors</a></span>(y, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>), <span class="dv">100</span>); nns
<span class="co">#&gt;            [,1]      [,2]      [,3]</span>
<span class="co">#&gt; [1,] 0.01060028 0.4445945 0.3598633</span>
<span class="co">#&gt; [2,] 0.35399148 0.3678210 0.2560636</span>
<span class="co">#&gt; [3,] 0.43505101 0.2829680 0.2341742</span>
<span class="co">#&gt; [4,] 0.24791701 0.3908070 0.3296455</span>
<span class="co">#&gt; [5,] 0.35757756 0.3348116 0.2877254</span>
<span class="co">#&gt; (continues for 95 more rows)</span>
nni =<span class="st"> </span><span class="kw"><a href="../reference/nneighb.html">kd_nn_indices</a></span>(y, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>), <span class="dv">10</span>); nni
<span class="co">#&gt;  [1] 64 17  3  9  2  6  5  7  1  4</span></code></pre></div>
<p>The <code>kd_nearest_neighbor</code> and <code>kd_nn_indices</code> functions return row-indices. The other functions return arrayvec objects.</p>
</div>
<div id="step-4--convert-back-to-a-matrix-for-use-in-r" class="section level5">
<h5 class="hasAnchor">
<a href="#step-4--convert-back-to-a-matrix-for-use-in-r" class="anchor"></a>Step 4. Convert back to a matrix for use in R</h5>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(<span class="kw"><a href="../reference/convert.html">tuples_to_matrix</a></span>(rq))
<span class="co">#&gt;            [,1]       [,2]       [,3]</span>
<span class="co">#&gt; [1,] 0.07977239 0.11978295 0.10041752</span>
<span class="co">#&gt; [2,] 0.05642256 0.09828960 0.19815089</span>
<span class="co">#&gt; [3,] 0.09291032 0.07148259 0.20112564</span>
<span class="co">#&gt; [4,] 0.07616577 0.12835161 0.07973155</span>
<span class="co">#&gt; [5,] 0.10496537 0.16711053 0.07296113</span>
<span class="co">#&gt; [6,] 0.08924499 0.17761309 0.08829078</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(<span class="kw"><a href="../reference/convert.html">tuples_to_matrix</a></span>(nns))
<span class="co">#&gt;            [,1]       [,2]      [,3]</span>
<span class="co">#&gt; [1,] 0.01060028 0.44459446 0.3598633</span>
<span class="co">#&gt; [2,] 0.35399148 0.36782096 0.2560636</span>
<span class="co">#&gt; [3,] 0.43505101 0.28296796 0.2341742</span>
<span class="co">#&gt; [4,] 0.24791701 0.39080698 0.3296455</span>
<span class="co">#&gt; [5,] 0.35757756 0.33481162 0.2877254</span>
<span class="co">#&gt; [6,] 0.42247297 0.08266129 0.3699597</span></code></pre></div>
<p>If you pass a matrix instead of an arrayvec object to any of the functions, it will be converted to an arrayvec object internally and results will be returned as matrices. This is slower and provided for convenience.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Timothy Keitt.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
